# CyberWhale - Компания по информационной безопасности с уникальными ИИ-решениями

## Описание проекта

CyberWhale - российская IT-компания, специализирующаяся на услугах информационной безопасности для бизнеса и государства. Компания предоставляет базовые услуги ИБ (аудиты, консалтинг, пентесты, инцидент-респонс, мониторинг) и создаёт кастомные ИИ-аватары для автоматизации задач кибербезопасности.

### Уникальные особенности

- **Услуги по ИБ (60% дохода)**: Аудиты безопасности, консалтинг, пентесты, инцидент-респонс, мониторинг 24/7, обучение сотрудников
- **Кастомные ИИ-аватары (30% дохода)**: Персональные ИИ-агенты для автоматизации задач ИБ - мониторинг, анализ логов, проверка политик
- **Обучение и турниры (10% дохода)**: CTF-платформа для лидогенерации, бесплатное обучение, пробные аватары

## Технологический стек

### Frontend
- **Framework**: React 18 с TypeScript
- **Build Tool**: Vite для быстрой разработки
- **UI Framework**: shadcn/ui на основе Radix UI
- **Styling**: Tailwind CSS с кибер-тематикой
- **State Management**: TanStack React Query, React Context для аутентификации
- **Routing**: React Router DOM
- **Анимации**: Framer Motion
- **Интернационализация**: react-i18next (русский/английский)

### Backend
- **Runtime**: Node.js 20 с Express.js
- **Language**: TypeScript с ES модулями
- **Database**: Replit PostgreSQL (Neon serverless)
- **ORM**: Drizzle ORM
- **Authentication**: JWT-токены, bcrypt для хеширования паролей
- **API**: RESTful API с префиксом `/api`

### Аутентификация
- JWT-токены с автоматическим обновлением
- Email-верификация с кодами
- Восстановление пароля
- Защищённые роуты (admin, user)

## Структура проекта

```
├── client/                    # Frontend приложение
│   ├── public/               # Статические файлы
│   └── src/
│       ├── components/       # React компоненты
│       │   ├── auth/        # Компоненты аутентификации
│       │   ├── layout/      # Навигация, футер, чат
│       │   ├── search/      # Поиск
│       │   └── ui/          # shadcn/ui компоненты
│       ├── data/            # Данные для CTF-заданий
│       ├── hooks/           # Custom React hooks
│       ├── lib/             # Утилиты и библиотеки
│       │   ├── auth/        # Логика аутентификации
│       │   └── i18n/        # Интернационализация
│       ├── locales/         # Переводы (ru/en)
│       ├── pages/           # Страницы приложения
│       │   ├── admin/       # Админ-панель
│       │   ├── auth/        # Страницы входа/регистрации
│       │   ├── ctf/         # CTF-платформа
│       │   ├── knowledge/   # База знаний
│       │   └── products/    # Услуги компании
│       └── types/           # TypeScript типы
│
├── server/                   # Backend приложение
│   ├── db.ts               # Подключение к базе данных
│   ├── index.ts            # Главный файл сервера
│   ├── newRoutes.ts        # API роуты (основной файл)
│   ├── storage.ts          # Работа с БД через Drizzle
│   ├── emailService.ts     # Сервис email-уведомлений
│   └── vite.ts             # Vite middleware для разработки
│
├── shared/                   # Общий код
│   └── schema.ts           # Drizzle схема БД (users, challenges)
│
└── package.json            # Зависимости проекта
```

## Основные компоненты

### База данных (PostgreSQL)

#### Таблица `users`
- **Поля**: id, username, email, password (хеширован), avatar, role, points, level
- **Дополнительные**: emailVerified, verificationCode, resetPasswordCode, timestamps
- **Использование**: Хранение данных пользователей, аутентификация, система уровней

#### Таблица `challenges`
- **Поля**: id, title, description, category, difficulty, points, flag, hints, fileUrl
- **Дополнительные**: isActive, timestamps
- **Использование**: CTF-задания для обучения

### API Endpoints

#### Аутентификация (`/api/auth/`)
- `POST /register` - Регистрация с email-верификацией
- `POST /verify-email` - Подтверждение email кодом
- `POST /login` - Вход (только для подтверждённых пользователей)
- `POST /forgot-password` - Запрос кода восстановления
- `POST /reset-password` - Сброс пароля с кодом
- `POST /resend-verification` - Повторная отправка кода
- `GET /me` - Получение текущего пользователя (защищён)
- `PUT /profile` - Обновление профиля (защищён)

#### Задания (`/api/challenges/`)
- `GET /challenges` - Список всех активных заданий
- `GET /challenges/:id` - Получение конкретного задания

#### Админ-панель (`/api/admin/`)
- `POST /verify-password` - Проверка пароля админа
- `POST /challenges` - Создание задания (только admin)
- `PUT /challenges/:id` - Обновление задания (только admin)
- `DELETE /challenges/:id` - Удаление задания (только admin)

#### Чат-ассистент (`/api/chat`)
- `POST /chat` - Отправка сообщения ИИ-ассистенту
- Поддержка Hugging Face API (если HUGGING_FACE_API_KEY установлен)
- Fallback на готовые ответы по кибербезопасности

## Переменные окружения

### Обязательные
- `DATABASE_URL` - Строка подключения к PostgreSQL (автоматически от Replit)
- `JWT_SECRET` - Секрет для подписи JWT-токенов (по умолчанию: "your-secret-key")

### Опциональные
- `HUGGING_FACE_API_KEY` - Ключ для Hugging Face API (ИИ-чат)
- `SENDGRID_API_KEY` - Ключ для отправки email (планируется)

## Развёртывание

### Development
```bash
npm install
npm run db:push      # Синхронизация схемы БД
npm run dev          # Запуск dev-сервера на порту 5000
```

### Production
```bash
npm run build        # Сборка frontend и backend
npm start            # Запуск production сервера
```

### Replit
- Приложение автоматически запускается через workflow "Start application"
- Vite HMR для горячей перезагрузки
- Порт 5000 (внутренний) → 80 (внешний)

## Бизнес-модель

### Целевая аудитория
1. **Малый и средний бизнес** - базовые услуги ИБ, кастомные аватары
2. **Государственные организации** - защита ГИС, аудиты КИИ
3. **Обучающиеся** - бесплатные курсы, CTF-турниры (лидогенерация)

### Монетизация
1. **Услуги ИБ (60%)**:
   - Аудиты: от 50,000 ₽
   - Консалтинг: от 100,000 ₽
   - Пентесты: от 150,000 ₽
   - Инцидент-респонс: от 200,000 ₽
   - Мониторинг 24/7: от 50,000 ₽/мес

2. **Кастомные ИИ-аватары (30%)**:
   - Разработка: 200,000–500,000 ₽
   - Подписка: 5,000 ₽/мес
   - Обучение на данных клиента (локально)
   - Интеграция (API, Telegram-боты)

3. **Обучение и турниры (10%)**:
   - Премиум-курсы: 1,000 ₽/мес
   - CTF-турниры (призы - бесплатные аудиты)
   - Пробные аватары для участников

### Прогноз
- **2025**: MVP платформы, первые продажи, 50 млн руб.
- **2026**: 100 клиентов, 150 млн руб.
- **2027**: Офис, госконтракты, 300 млн руб.

## Особенности разработки

### Аутентификация
- Полностью серверная (без Supabase)
- JWT-токены хранятся в localStorage
- Email-верификация через коды (не ссылки)
- Для разработки коды выводятся в консоль браузера

### Админ-панель
- Доступ по паролю (в будущем - через роли)
- Управление CTF-заданиями
- Просмотр пользователей (планируется)

### ИИ-чат
- Интеграция с Hugging Face (facebook/blenderbot-400M-distill)
- Fallback на статические ответы по кибербезопасности
- Контекстные ответы о услугах компании

## Дальнейшее развитие

### Краткосрочные планы (Q1-Q2 2025)
- [ ] Страница с подробным описанием услуг ИБ
- [ ] Форма заказа услуг/консультации
- [ ] Расширение базы CTF-заданий (15-20 заданий)
- [ ] Интеграция SendGrid для email
- [ ] Система личных аватаров пользователей

### Среднесрочные планы (Q3-Q4 2025)
- [ ] Интеграция YandexGPT для ИИ-аватаров
- [ ] Система продажи кастомных аватаров
- [ ] CTF Arena с турнирами и трансляциями
- [ ] Расширенная аналитика для клиентов

### Долгосрочные планы (2026)
- [ ] Мобильное приложение
- [ ] Партнёрства с ИБ-компаниями
- [ ] Государственные контракты
- [ ] Масштабирование до 50,000+ пользователей

## Контакты и поддержка

Для вопросов по разработке или бизнесу обращайтесь через платформу CyberWhale.

---

**Последнее обновление**: Октябрь 2025
**Версия**: 2.0.0 (После миграции с Supabase на Replit PostgreSQL)
